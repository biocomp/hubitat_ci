name: $(Build.DefinitionName)_$(SourceBranchName)_$(Date:yyyy_MM_dd)$(Rev:.r)

# This does not seem to be working - PRs on github are still enabling this check.
# I've had to disable PR validation in VSTS overriding YAML.
trigger: none # For manual publishing

jobs:
- deployment: DeployMavenPackage
  displayName: "Deploy Maven package"
  pool:
    name: "default"
    demands: java

  environment: 'hubitat_ci-dev'

  strategy:
    runOnce:
      deploy:
        steps:
        - checkout: self
          submodules: true
        
        - task: Gradle@2
          displayName: 'gradlew build groovydoc publish'
          inputs:
            tasks: build groovydoc publish

